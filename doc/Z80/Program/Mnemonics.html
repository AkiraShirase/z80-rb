<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module Z80::Program::Mnemonics - ruby-Z80</title>

<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../index.html">Home</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>z80/mnemonics.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    
  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../README_txt.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../Z80.html">Z80</a>
  
    <li><a href="../../Z80/Alloc.html">Z80::Alloc</a>
  
    <li><a href="../../Z80/CompileError.html">Z80::CompileError</a>
  
    <li><a href="../../Z80/Helpers.html">Z80::Helpers</a>
  
    <li><a href="../../Z80/Label.html">Z80::Label</a>
  
    <li><a href="../../Z80/Program.html">Z80::Program</a>
  
    <li><a href="../../Z80/Program/Condition.html">Z80::Program::Condition</a>
  
    <li><a href="../../Z80/Program/Mnemonics.html">Z80::Program::Mnemonics</a>
  
    <li><a href="../../Z80/Program/Register.html">Z80::Program::Register</a>
  
    <li><a href="../../Z80/Syntax.html">Z80::Syntax</a>
  
    <li><a href="../../Z80/TAP.html">Z80::TAP</a>
  
    <li><a href="../../Z80/TAP/TapeError.html">Z80::TAP::TapeError</a>
  
    <li><a href="../../Z80Lib.html">Z80Lib</a>
  
    <li><a href="../../Z80Lib/Macros.html">Z80Lib::Macros</a>
  
    <li><a href="../../Z80MathInt.html">Z80MathInt</a>
  
    <li><a href="../../Z80MathInt/Macros.html">Z80MathInt::Macros</a>
  
    <li><a href="../../Symbol.html">Symbol</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Z80::Program::Mnemonics</h1>

  <div id="description" class="description">
    
<h2 id="label-Z80+Mnemonics"><a href="../../Z80.html">Z80</a> <a href="Mnemonics.html">Mnemonics</a></h2>

<p>All <a href="../../Z80.html">Z80</a> instructions are created as singleton
methods. They produce machine code which is added to
<strong>program</strong> class instance variable: <a
href="../Program.html#attribute-i-code">Z80::Program#code</a>.</p>

<p>These mnemonics mimic standard ones (used in assemblers) but with some
exceptions (because of ruby parser spec.):</p>
<ul><li>
<p>all instruction and register names are lower case</p>
</li><li>
<p>all conditions are upper case e.g.:</p>

<pre>jp NZ, somewhere</pre>

<p>use [ ] instead of ( ) e.g.:</p>

<pre>ld a, [de]
ex [sp], hl
ld [ix+index], c
ld a, [label_name]</pre>
</li><li>
<p>use <code>anda</code> instead of <code>and</code></p>
</li><li>
<p>use <code>ora</code>  instead of <code>or</code></p>
</li><li>
<p>use <code>inp</code>  instead of <code>in</code></p>
</li><li>
<p>use <code>ex af,af</code> instead of <code>ex af,af'</code> (no apostrophe
after <code>af</code>‘)</p>
</li></ul>

<p>The ones below are due to my lazyness:</p>
<ul><li>
<p>use <code>im0</code>, <code>im01</code>, <code>im1</code>, <code>im2</code>
instead of <code>im</code> <code>n</code>. It is so rarely used so i didn’t
care creating a single method for it.</p>
</li><li>
<p>do not use [ ] around <code>out</code> and <code>inp</code> instructions’
arguments e.g.:</p>

<pre>out c, a    # ok
out (c), a  # () are ok, ruby doesn't care much about them</pre>

<p><em>however ruby emits warning: (...) interpreted as grouped
expression</em></p>

<pre># only Integers are allowed here; no labels!
inp a, (0xfe)</pre>
</li><li>
<p>do not use [ ] around JP (HL/IX/IY) e.g.:</p>

<pre>jp  hl     # ok
jp  (hl)   # () are ok, ruby doesn't care much about them</pre>

<p><em>however ruby emits warning: (...) interpreted as grouped
expression</em></p>
</li></ul>

<h3 id="label-Undocumented+%28by+Zilog%29+Z80+instructions">Undocumented (by Zilog) <a href="../../Z80.html">Z80</a> instructions</h3>

<p>See: <a
href="http://www.z80.info/z80undoc.htm">www.z80.info/z80undoc.htm</a></p>
<ul><li>
<p><code>sll</code> (or <code>sl1</code>) which means shift left <code>(a b c
d e h l [hl] [ixn])</code> by one and set it's bit 0 to 1</p>
</li><li>
<p>2 in 1 instructions like</p>

<pre>set 4, [ix+n], b</pre>

<p>which means:</p>

<pre>set 4, [ix+n]; ld b, [ix+n]</pre>

<p>but is a single instruction only. It applies to
<code>ix</code>/<code>iy</code> indexing registers and following
instructions (without <code>bit</code>):</p>

<pre>rlc rrc rl rr sla sra sll srl set res</pre>
</li><li>
<p><code>ixh/ixl/iyh/iyl</code> 8-bit registers of 16bit <code>ix/iy</code>
use them replacing <code>l</code> and <code>h</code> registers in:</p>

<pre>ld inc dec add adc sbc sub anda xor ora cp</pre>

<p>however you can’t mix (<code>ixh</code> <code>ixl</code>)/(<code>iyh</code>
<code>iyl</code>)/<code>h</code>/<code>l</code> registers in one
instruction like:</p>

<pre>ld ixh, iyh # invalid
ld h, iyh   # invalid</pre>
</li><li>
<p>and the less usefull but included for completeness:</p>

<pre>out (c), 0
inp (c)</pre>

<p>the last one only adjust <a href="../../Z80.html">Z80</a> flags but the
result goes to <code>/dev/null</code> (figuratively speaking).</p>
</li></ul>

<h2 id="label-Mnemonic+list">Mnemonic list</h2>

<p><code>adc add anda bit call ccf cp cpd cpdr cpi cpir cpl daa dec di djnz ei
ex exx halt hlt im0 im01 im1 im2 inc ind indr ini inir inp jp jr ld ldd
lddr ldi ldir neg nop ora otdr otir out outd outi pop push res ret reti
retn rl rla rlc rlca rld rr rra rrc rrca rrd rst sbc scf set sl1 sla sll
sra srl sub xor</code></p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

